# Welcome to Kuvakehys

Kuvakehys is the application that runs [tasveer.de](http://tasveer.de). It allows you to collect photos in a group and once a certain amount of pictures is collected they are automatically printed and shipped to a configured recipient. 

## Setup

### Dependencies:

* Postgres >= 9.1 (SQLite3 works fine for development. adjust the Gemfile if you need it)
* Ruby >= 1.9.3 (2.1 preferred)
* all ruby dependencies are described in the Gemfile (please refere to the changelog of this file to check for updates)
* node.js or a similar JavaScript runtime for asset compilation - if you do not have node.js or a similar JS runtime, add `gem 'therubyracer', platforms: :ruby` to the Gemfile
* mailgun.com for incoming emails (should be easy to change to another provider that forwards emails to http)
* ongair.im for whatsapp integration

### Installation

1) Install the bundle

    bundle install

2) Setup your database

    cp config/database.yml.example config/database.yml
    vim config/database.yml # edit your database configuration
    rake db:setup # create, migrate and seed the database

3) Setup application config using [dotenv](https://github.com/bkeepers/dotenv)
    
    cp env.example .env
    vim .env # edit the needed variables

4) Run the server / done

    rails server
    open [http://localhost:3000](http://localhost:3000)

### Production setup

0) make sure all environment variables are set

1) e-mail integration

for incoming emails we are using [mailgun](mailgun.com). Configure a catch all route to `/email_processor`
The gem `griddler` is used for parsing the webhook.


## Photo printing

Currenty we use [pwinty](http://pwinty.com) to print the photos. So far this was the only easily available service with a decent API. 
The have printing facilities in many countries and ship internationally (which is suuuper expensive, meaning too expensive).

The service might change in the future. Also we are looking for a more individualized product.


